<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8"/>
    <title>Sticky Note</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"/>

    <style>
    li, textarea, a {
      -webkit-app-region: no-drag;
    }

    .container-fluid {
      padding: 0px;
    }

    .pager {
      margin: 2px;
    }

    html, body, .container-fluid {
      height: 100%;
    }
    .form-group{
      margin: 0px;
    }
    textarea.form-control {
      height: 100%;
      resize: none;
      padding: 2px;
    }
    </style>

  </head>

  <body style = "-webkit-app-region: drag" onresize="setComponentRatio()">
    <div class="container-fluid">
      <ul class="pager">
        <li class="previous"><a class="glyphicon glyphicon-plus" onclick="newSticky()"></a></li>

        <li class="next"><a class="glyphicon glyphicon-remove"  onclick="hideSticky()"></a></li>
        <li class="next"><a class="glyphicon glyphicon-trash"  onclick="deleteSticky()"></a></li>
      </ul>

      <div class="form-group">
        <textarea class="form-control" id="my-textarea" rows="1"></textarea>
      </div>

    </div>

    <script type = "text/javascript">
    window.$ = window.jQuery = require(`C:/Users/kokihoon_KING/workspaceAtom/koki_memo3/node_modules/jquery/dist/jquery.js`);
    const {remote, ipcRenderer}  = require('electron');
    const {BrowserWindow} = remote;
    var fs = require('fs');

    //상단 매뉴 버튼
    function newSticky(){
       ipcRenderer.send('sync');
    }
    function hideSticky() {
      var myElem = remote.getCurrentWindow('my-textarea');

      let opt = {
        encoding : 'utf-8',
      }
      ipcRenderer.send('save', myElem);
    }

    ipcRenderer.on('close', (event, arg) => {
      console.log(arg)
      window.close();
    });

    function deleteSticky(){
      alert("삭제");
    }

    //앱 사이즈 변경
    function setComponentRatio(){
      let bodyHeight = $("body").height();
      let pagerHeight = $(".pager").height();

      $("#my-textarea").height(bodyHeight - pagerHeight - 12);
    }

    //앱 시작 상태
    $("document").ready(function(){
      setComponentRatio();
    })
    </script>

  </body>

</html>
